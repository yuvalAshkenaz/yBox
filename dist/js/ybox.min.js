/*! yBox - v6.3 - 09/01/2025
* By Yuval Ashkenazi
* https://github.com/yuvalAshkenaz/yBox */
"use strict";function ybox_zoom(e,t){e=void 0!==e&&Object.keys(e).length?e:{};for(var o,a,s,r,n,l,i,x,u,c,y,d,b,f,m,v,h,g,p,B,$,_,A,C,w,Y,E,F,H,P,L,S,j=(t=void 0!==t&&Object.keys(t).length?t:{}).scaleDefault||2,O=t.scaleDifference||.5,k=t.scaleMax||10,M=t.scaleMin||1,D=e.active||"active",W="data-scale",N="data-translate-x",I="data-translate-y",q=e.transition||"transition",R=e.visible||"visible",X=document.getElementsByClassName(e.zoom||"zoom"),z=!1,G=[null],K=0,T=!1,U=0,V=[null],Z=0;Z<X.length;Z++)(a=(o=X[Z]).children[0]).setAttribute(W,1),a.setAttribute(N,0),a.setAttribute(I,0);window.addEventListener("load",function(){for(var e=0;e<X.length;e++)ybox_addClass(a=(o=X[e]).children[0],R);window.addEventListener("resize",function(){for(var e=0;e<X.length;e++)a=(o=X[e]).children[0],!1!==ybox_hasClass(o,D)&&(s=o.clientHeight,r=o.clientWidth,x=a.clientHeight,u=a.clientWidth,c=parseFloat(a.getAttribute(N)),y=parseFloat(a.getAttribute(I)),h=(u*(L=j)-r)/2,g=(x*L-s)/2,F=u*L>r?ybox_minMax(c,-1*h,h):0,H=x*L>s?ybox_minMax(y,-1*g,g):0,1===L&&ybox_removeClass(o,D),a.setAttribute(W,L),a.setAttribute(N,F),a.setAttribute(I,H),ybox_moveScaleElement(a,F+"px",H+"px",L))})}),ybox_massAddEventListener(X,"mousedown",function e(t){if(t.preventDefault(),!0===T||1!==t.which)return!1;if(o=this,a=this.children[0],b=t.clientX,m=t.clientY,null===G[0])G[0]=t.target,G[1]=b,G[2]=m,setTimeout(function(){G=[null]},300);else if(G[0]===t.target&&K<=5&&!0===ybox_isWithinRange(b,G[1]-10,G[1]+10)&&!0===ybox_isWithinRange(m,G[2]-10,G[2]+10))return ybox_addClass(a,q),!0===ybox_hasClass(o,D)?(a.setAttribute(W,1),a.setAttribute(N,0),a.setAttribute(I,0),ybox_removeClass(o,D),ybox_moveScaleElement(a,0,0,1)):(a.setAttribute(W,j),a.setAttribute(N,0),a.setAttribute(I,0),ybox_addClass(o,D),ybox_moveScaleElement(a,0,0,j)),setTimeout(function(){ybox_removeClass(a,q)},200),G=[null],!1;n=(p=o.getBoundingClientRect()).left,l=p.top,s=o.clientHeight,r=o.clientWidth,x=a.clientHeight,u=a.clientWidth,c=parseFloat(a.getAttribute(N)),y=parseFloat(a.getAttribute(I)),i=ybox_minMax(parseFloat(a.getAttribute(W)),M,k),K=0,z=!0}),ybox_massAddEventListener(X,"mouseenter",function e(){ybox_disableScroll(!0)}),ybox_massAddEventListener(X,"mouseleave",function e(){ybox_enableScroll()}),document.addEventListener("mousemove",function e(t){if(!0===T||!1===z)return!1;_=t.clientX,C=t.clientY,h=(u*(L=i)-r)/2,g=(x*L-s)/2,F=u*L<=r?0:ybox_minMax(_-(b-c),-1*h,h),H=x*L<=s?0:ybox_minMax(C-(m-y),-1*g,g),K++,Math.abs(F)===Math.abs(h)&&(c=F,b=_),Math.abs(H)===Math.abs(g)&&(y=H,m=C),a.setAttribute(W,L),a.setAttribute(N,F),a.setAttribute(I,H),ybox_moveScaleElement(a,F+"px",H+"px",L)}),document.addEventListener("mouseup",function e(){if(!0===T||!1===z)return!1;z=!1}),document.addEventListener("touchstart",function(){T=!0}),ybox_massAddEventListener(X,"touchstart",function e(t){if(t.preventDefault(),t.touches.length>2)return!1;if(o=this,a=this.children[0],n=(p=o.getBoundingClientRect()).left,l=p.top,s=o.clientHeight,r=o.clientWidth,x=a.clientHeight,u=a.clientWidth,b=t.touches[0].clientX,m=t.touches[0].clientY,i=ybox_minMax(parseFloat(a.getAttribute(W)),M,k),1===(S=t.touches.length)){if(null===V[0])V[0]=t.target,V[1]=b,V[2]=m,setTimeout(function(){V=[null]},300);else if(V[0]===t.target&&U<=1&&!0===ybox_isWithinRange(b,V[1]-10,V[1]+10)&&!0===ybox_isWithinRange(m,V[2]-10,V[2]+10))return ybox_addClass(a,q),!0===ybox_hasClass(o,D)?(a.setAttribute(W,1),a.setAttribute(N,0),a.setAttribute(I,0),ybox_removeClass(o,D),ybox_moveScaleElement(a,0,0,1)):(a.setAttribute(W,j),a.setAttribute(N,0),a.setAttribute(I,0),ybox_addClass(o,D),ybox_moveScaleElement(a,0,0,j)),setTimeout(function(){ybox_removeClass(a,q)},200),V=[null],!1;c=parseFloat(a.getAttribute(N)),y=parseFloat(a.getAttribute(I))}else 2===S&&(c=parseFloat(a.getAttribute(N)),y=parseFloat(a.getAttribute(I)),f=t.touches[1].clientX,v=t.touches[1].clientY,B=(b+f)/2,$=(m+v)/2,d=Math.sqrt((b-f)*(b-f)+(m-v)*(m-v)));U=0,z=!0}),document.addEventListener("touchmove",function e(t){if(!1===z)return!1;t.preventDefault(),_=t.touches[0].clientX,C=t.touches[0].clientY,S=t.touches.length,U++,S>1?(P=Math.sqrt((_-(A=t.touches[1].clientX))*(_-A)+(C-(w=t.touches[1].clientY))*(C-w)),null===d&&(d=P),Math.abs(d-P)>=1&&(h=(u*(L=ybox_minMax(P/d*i,M,k))-r)/2,g=(x*L-s)/2,E=L-i,F=u*L<=r?0:ybox_minMax(c-(B-n-r/2-c)/(L-E)*E,-1*h,h),H=x*L<=s?0:ybox_minMax(y-($-l-s/2-y)/(L-E)*E,-1*g,g),L>1?ybox_addClass(o,D):ybox_removeClass(o,D),ybox_moveScaleElement(a,F+"px",H+"px",L),d=P,i=L,c=F,y=H)):(h=(u*(L=i)-r)/2,g=(x*L-s)/2,F=u*L<=r?0:ybox_minMax(_-(b-c),-1*h,h),H=x*L<=s?0:ybox_minMax(C-(m-y),-1*g,g),Math.abs(F)===Math.abs(h)&&(c=F,b=_),Math.abs(H)===Math.abs(g)&&(y=H,m=C),a.setAttribute(W,i),a.setAttribute(N,F),a.setAttribute(I,H),ybox_moveScaleElement(a,F+"px",H+"px",L))},{passive:!1}),document.addEventListener("touchend",function e(t){if(S=t.touches.length,!1===z)return!1;0===S?(a.setAttribute(W,i),a.setAttribute(N,F),a.setAttribute(I,H),d=null,z=!1):1===S?(b=t.touches[0].clientX,m=t.touches[0].clientY):S>1&&(d=null)}),ybox_massAddEventListener(X,"wheel",function e(t){if(o=this,a=this.children[0],p=o.getBoundingClientRect(),s=o.clientHeight,r=o.clientWidth,x=a.clientHeight,u=a.clientWidth,n=p.left,l=p.top,i=ybox_minMax(parseFloat(a.getAttribute(W),M,k)),c=parseFloat(a.getAttribute(N)),y=parseFloat(a.getAttribute(I)),_=t.clientX,C=t.clientY,(L=i+(E=O*(Y=t.deltaY<0?1:-1)))<M||L>k)return!1;h=(u*L-r)/2,g=(x*L-s)/2,L<=1?(F=0,H=0):(F=u*L<=r?0:ybox_minMax(c-(_-n-r/2-c)/(L-E)*E,-1*h,h),H=x*L<=s?0:ybox_minMax(y-(C-l-s/2-y)/(L-E)*E,-1*g,g)),L>1?ybox_addClass(o,D):ybox_removeClass(o,D),a.setAttribute(W,L),a.setAttribute(N,F),a.setAttribute(I,H),ybox_moveScaleElement(a,F+"px",H+"px",L)})}function ybox_addClass(e,t){!1===ybox_hasClass(e,t)&&(e.className+=" "+t)}function ybox_disableScroll(e){e||(window.addEventListener&&window.addEventListener("DOMMouseScroll",ybox_preventDefault,!1),window.onwheel=ybox_preventDefault,window.onmousewheel=document.onmousewheel=ybox_preventDefault,window.ontouchmove=ybox_preventDefault),document.onkeydown=ybox_preventDefaultForScrollKeys}function ybox_enableScroll(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",ybox_preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null}function ybox_isWithinRange(e,t,o){return!!(e>=t)&&!!(e<=o)}function ybox_hasClass(e,t){var o=RegExp("(?:^|\\s)"+t+"(?!\\S)","g");return!!(e.className&&e.className.match(o))}function ybox_massAddEventListener(e,t,o,a){for(var a=a||!1,s=0;s<e.length;s++)e[s].addEventListener(t,o,a)}function ybox_minMax(e,t,o){return e<t?e=t:e>o&&(e=o),e}function ybox_moveScaleElement(e,t,o,a){e.style.cssText="-moz-transform : translate("+t+", "+o+") scale("+a+"); -ms-transform : translate("+t+", "+o+") scale("+a+"); -o-transform : translate("+t+", "+o+") scale("+a+"); -webkit-transform : translate("+t+", "+o+") scale("+a+"); transform : translate3d("+t+", "+o+", 0) scale3d("+a+", "+a+", 1);"}function ybox_preventDefault(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue=!1}function ybox_preventDefaultForScrollKeys(e){if(({37:1,38:1,39:1,40:1})[e.keyCode])return preventDefault(e),!1}function ybox_removeClass(e,t){var o=RegExp("(?:^|\\s)"+t+"(?!\\S)","g");e.className=e.className.replace(o,"")}jQuery("body").on("click",".yBox",function(e){e.preventDefault(),e.stopPropagation();var t=jQuery(this);if(jQuery(".yBox.yBoxFocus").length){if("undefined"!=typeof beforeYboxClose&&!1==beforeYboxClose(jQuery(".yBox.yBoxFocus")))return!1;jQuery(".yBox.yBoxFocus").not(t).removeClass("yBoxFocus")}t.addClass("yBoxFocus"),yBox({self:t})});var yUrl=new URL(document.currentScript.src),yBox_lang=yUrl.searchParams.get("lang"),strings={close:"Close",next:"Next",prev:"Prev"};("he"==yBox_lang||"he-IL"==yBox_lang||"he_IL"==yBox_lang)&&(yBox_lang="he",strings={close:"סגירה",next:"הבא",prev:"הקודם"}),("ar"==yBox_lang||"ar-ar"==yBox_lang)&&(yBox_lang="ar",strings={close:"لإغلاق",next:"التالي",prev:"السابق"});var url=new URL(window.location.href),msg=url.searchParams.get("msg"),yBoxPrm=url.searchParams.get("ybox-url"),yBoxClassPrm=url.searchParams.get("ybox-class");function yBox(e){if(!jQuery(".yBoxOverlay:not(.active)").length){e.self?t=e.self:e.url&&(t=jQuery(e.url)),"undefined"!=typeof beforeYboxOpen&&beforeYboxOpen(t);var t,o=!0;void 0===e.yBoxClass&&(e.yBoxClass=""),void 0!==e.self&&e.self||(o=!1),o&&(e.yBoxClass=e.self.data("ybox-class")||"",e.url=e.self.attr("href"));var a='<div class="yBoxOverlay no-contrast'+("he"==yBox_lang||"ar"==yBox_lang?" yBoxRTL":"")+'" tabindex="-1"><div class="yBoxFrame '+e.yBoxClass+'" role="dialog"><button type="button" class="closeYbox" title="'+strings.close+'" aria-label="'+strings.close+'"></button><div class="insertYboxAjaxHere" tabindex="-1"></div></div></div>';jQuery(".yBoxFrame").length?jQuery(".yBoxFrame.yBoxImgWrap").length?(remove_yBox_placeholder(),jQuery(".insertYboxAjaxHere").html(""),insert_yBox_html({self:e.self,hasSelf:o,url:e.url,code:e.code,focus:e.focus})):jQuery(".insertYboxAjaxHere").animate({opacity:0},function(){var t=jQuery(this);setTimeout(function(){remove_yBox_placeholder(),t.html(""),insert_yBox_html({self:e.self,hasSelf:o,url:e.url,code:e.code,focus:e.focus}),jQuery(".insertYboxAjaxHere").animate({opacity:1})},200)}):(jQuery("body").append(a),insert_yBox_html({self:e.self,hasSelf:o,url:e.url,code:e.code,focus:e.focus}),setTimeout(function(){jQuery(".yBoxOverlay").addClass("active")},200)),setTimeout(function(){"undefined"!=typeof afterYboxOpen&&afterYboxOpen(t)},200)}}function insert_yBox_html(e){if(jQuery(".yBoxFrame").removeClass("yBoxIframeWrap yBoxImgWrap"),e.hasSelf){if(e.self.hasClass("yBox_iframe")){if(jQuery(".yBoxFrame").addClass("yBoxIframeWrap"),e.url.toLowerCase().indexOf("youtube")>-1||e.url.toLowerCase().indexOf("youtu.be")>-1){var t=e.url.replace(/^[^v]+v.(.{11}).*/,"$1").replace("https://youtu.be/","").replace(/.*youtube.com\/embed\//,"");e.url="https://www.youtube.com/embed/"+t+"?wmode=transparent&rel=0&autoplay=1&hl="+yBox_lang}if(e.url.toLowerCase().indexOf("vimeo")>-1){var o=e.url.match(/video\/(\d+)/)[1];e.url="https://player.vimeo.com/video/"+o+"?autoplay=1&background=1"}var a='<iframe src="'+e.url+'" frameborder="0" wmode="Opaque" allow="autoplay" allowfullscreen class="yBoxIframe"></iframe>';a=yBox_Group(e.self,a)}else if(e.self.hasClass("yBox_video")){jQuery(".yBoxFrame").addClass("yBoxIframeWrap");var a='<video class="yBoxVideo" autoplay controls preload plays-inline playsinline><source src="'+e.url+'" type="video/mp4" /></video>';a=yBox_Group(e.self,a),jQuery(".yBoxFrame .insertYboxAjaxHere").html(a)}else if(e.self.hasClass("yBox_ajax"))jQuery.get(e.url,function(e){jQuery(".insertYboxAjaxHere").addClass("isAjax").html(e)});else if(-1==e.url.indexOf("#")){jQuery(".yBoxFrame").addClass("yBoxImgWrap"),jQuery(".insertYboxAjaxHere").append('<div style="text-align:center;position:absolute;right:0;left:0;top:0;bottom:0;"><div class="yBoxLoader"></div></div>');var s=new Image;s.src=e.url,s.className="yBoxImg",s.onload=function(){var t=e.self.data("ybox-alt")||"",o="";e.self.data("ybox-title")&&(o='<h3 class="ybox-img-title">'+e.self.data("ybox-title")+"</h3>");var a='<div class="yBoxImgZoom"><img src="'+e.url+'" alt="'+t+'" class="yBoxImg" />'+o+"</div>";a=yBox_Group(e.self,a),window.screen.width<=767&&ybox_zoom({zoom:"yBoxImgZoom"})}}else jQuery(e.url).after('<div class="yBoxFramePlaceHolder"></div>'),jQuery(".insertYboxAjaxHere.isAjax").length&&jQuery(".insertYboxAjaxHere.isAjax").removeClass("isAjax"),jQuery(e.url).appendTo(".insertYboxAjaxHere");window.screen.width>991&&setTimeout(function(){e.self.data("focus")?jQuery(".insertYboxAjaxHere ."+e.self.data("focus")).focus():setYboxFocus()},500)}else void 0===e.code&&e.url?(jQuery(e.url).after('<div class="yBoxFramePlaceHolder"></div>'),jQuery(e.url).appendTo(".insertYboxAjaxHere")):jQuery(".insertYboxAjaxHere").html(e.code),setTimeout(function(){setYboxFocus({focus:e.focus})},500)}function setYboxFocus(e){void 0!==e&&void 0!==e.focus?jQuery(e.focus).focus():jQuery(".closeYbox").focus()}function yBox_Group(e,t){var o=e.data("ybox-group");return o&&jQuery('.yBox[data-ybox-group="'+o+'"]').length>1&&(t='<button type="button" class="yBoxNext" title="'+strings.next+'"></button>'+t+'<button type="button" class="yBoxPrev" title="'+strings.prev+'"></button>'),jQuery(".insertYboxAjaxHere").html(t),t}function yBoxNext(e){var t,o=e.data("ybox-group"),a=!1;jQuery('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').each(function(s){a||jQuery(this).attr("data-ybox-id")!=e.attr("data-ybox-id")||(a=!0,t=jQuery('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').eq(s+1).length?jQuery('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').eq(s+1):jQuery('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').eq(0))}),t&&(jQuery(".yBox").data("focus",""),t.data("focus","yBoxNext"),t.trigger("click"))}function yBoxPrev(e){var t,o=e.data("ybox-group");jQuery('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').each(function(a){if(jQuery(this).attr("data-ybox-id")==e.attr("data-ybox-id")){if(jQuery('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').eq(a-1).length)t=jQuery('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').eq(a-1);else{var s=jQuery('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').length;t=jQuery('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').eq(s-1)}}}),t&&(jQuery(".yBox").data("focus",""),t.data("focus","yBoxPrev"),t.trigger("click"))}function remove_yBox_placeholder(){if(jQuery(".yBoxFramePlaceHolder").length){var e=jQuery(".insertYboxAjaxHere > *").eq(0).attr("id");e?jQuery("#"+e).insertBefore(".yBoxFramePlaceHolder"):jQuery(".yBoxFramePlaceHolder").before(jQuery(".insertYboxAjaxHere").html()),jQuery(".yBoxFramePlaceHolder").remove()}}(msg||yBoxPrm)&&(jQuery.isEmptyObject(yBoxPrm)||-1!=yBoxPrm.indexOf("http:")||-1!=yBoxPrm.indexOf("https:")||(yBoxPrm="#"+yBoxPrm),yBox({code:!yBoxPrm&&msg,yBoxClass:yBoxClassPrm||"ybox-content-frame",url:!!yBoxPrm&&yBoxPrm}),setTimeout(function(){var e=new URLSearchParams(window.location.search);e.delete("msg"),e.delete("ybox-url"),e.delete("ybox-class"),e.toString()&&(e="?"+e.toString());var t=window.location.pathname+e;window.history.pushState("","",t)},500)),jQuery("body").on("click",".yBoxNext",function(e){yBoxNext(jQuery(".yBoxFocus"))}),jQuery("body").on("click",".yBoxPrev",function(e){yBoxPrev(jQuery(".yBoxFocus"))}),setTimeout(function(){jQuery(".yBox[data-ybox-group]:not(.swiper-slide-duplicate)").each(function(e){var t=jQuery(this).data("ybox-group");jQuery(this).attr("data-ybox-id",t+"-"+e)}),jQuery(".yBox[data-ybox-group].swiper-slide-duplicate").each(function(e){var t=jQuery(this).data("ybox-group");jQuery(this).attr("data-ybox-id",t+"-"+e)})},500),jQuery("body").on("click",".yBoxOverlay",function(e){for(var t="",o=0;o<e.target.classList.length;o++)(e.target.classList[o].indexOf("yBoxOverlay")>-1||e.target.classList[o].indexOf("active")>-1)&&(t+=e.target.classList[o]+" ");if(t.indexOf("yBoxOverlay active")>-1||"string"==typeof e.target.className&&e.target.className.indexOf("closeYbox")>-1){var a=jQuery(".insertYboxAjaxHere > *").eq(0);if(jQuery(".yBox.yBoxFocus").length&&(a=jQuery(".yBox.yBoxFocus")),"undefined"!=typeof beforeYboxClose&&!1==beforeYboxClose(a))return!1;jQuery(".yBoxOverlay").removeClass("active"),jQuery(".yBoxFocus").focus(),setTimeout(function(){"undefined"!=typeof afterYboxClose&&afterYboxClose(a),remove_yBox_placeholder(),jQuery(".yBoxOverlay").remove()},600)}}),jQuery("body").on("focus",".closeYboxOnFocus",function(){jQuery(".closeYbox").trigger("click")}),jQuery(document).keyup(function(e){if(jQuery(".yBoxImg").length){var t=jQuery('.yBox[href="'+jQuery(".yBoxImg").attr("src")+'"]');39===e.keyCode&&("he"==yBox_lang?yBoxPrev(t):yBoxNext(t)),37===e.keyCode&&("he"==yBox_lang?yBoxNext(t):yBoxPrev(t))}27===e.keyCode&&jQuery(".closeYbox").trigger("click"),9==e.keyCode&&jQuery("body").addClass("ybox-focus")}),jQuery(document).keydown(function(e){var t=jQuery(".yBoxFrame").find("input, button:not(:disabled), textarea, select, a").filter(":visible"),o=t.first(),a=t.last();9==e.keyCode&&(e.shiftKey&&jQuery(document.activeElement).is(o)?(e.preventDefault(),a.focus()):!e.shiftKey&&jQuery(document.activeElement).is(a)&&(e.preventDefault(),o.focus()))});
